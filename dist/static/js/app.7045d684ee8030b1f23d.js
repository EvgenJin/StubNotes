webpackJsonp([1],{"7zck":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),o=n("fZjL"),s=n.n(o),r=new i.default,l=n("EFqf"),a=n.n(l),c=n("Dd8w"),u=[],f=[],d={input:function(){return this.$refs.txt.$refs.input},hasSelection:function(){return this.input().selectionStart!==this.input().selectionEnd},selection:function(){var t=this.input();return t.value.substring(t.selectionStart,t.selectionEnd)||""},selectionInfo:function(){var t=this.input(),e=t.value,n=t.selectionStart,i=e.substring(n,t.selectionEnd)||"",o=e.substring(0,n),s=o.lastIndexOf("\n");return{value:e,sel:i,selPos:n,beforeSel:o,afterSel:e.substring(n),prevCRPos:s,beforeCR:s>=0?o.substring(0,s+1):"",afterCR:s>=0?o.substring(s+1):""}},replace:function(t){var e=t.value,n=t.selectionStart,i=t.selectionEnd;null==i&&(i=n);var o=this.input();this.$emit("input",e),this.$nextTick(function(){o.focus(),o.setSelectionRange(n,i)})},insert:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i.selectionAtEnd,s=i.offsetStart,r=i.offsetEnd,l=i.filterValue,a=i.filterSelection,c=this.input(),d=c.value,v=c.selectionEnd;u.push({value:d,selectionStart:c.selectionStart,selectionEnd:c.selectionEnd}),f=[];var h=c.selectionStart,p=c.selectionEnd,g=d.substring(0,h),_=d.substring(p),b=t&&g.endsWith(t)&&_.startsWith(e);if(h==p){if(b?(d=g.substring(0,g.length-t.length)+_.substring(e.length),v+=-e.length):(d=g+t+n+e+_,v+=t.length,s=0,r=n.length,o&&(v+=r,r=0)),l){var m={pos:v};d=l(d,m),v=m.pos}}else{var k=d.substring(h,p);a&&(k=a(k)),b?(d=g.substring(0,g.length-t.length)+k+_.substring(e.length),s=-k.length-t.length,r=k.length):(d=g+t+k+e+_,s?v+=(t+e).length:(v=h,s=t.length,r=k.length))}this.$emit("input",d),this.$nextTick(function(){c.focus(),r=(s=v+(s||0))+(r||0),c.setSelectionRange(s,r)})},bold:function(){this.insert("**","**","bold")},italic:function(){this.insert("_","_","italics")},strikethrough:function(){this.insert("~~","~~","strikethrough")},link:function(){this.insert("[","](http://)","",{offsetStart:-8,offsetEnd:7})},table:function(){this.insert("col1|col2\n","val1|val2","-|-\n")},quote:function(){this.insert("\n> ","\n","Blockquote",{})},image:function(){this.insert("![","](http://)","alt text",{offsetStart:-8,offsetEnd:7})},code:function(t){var e=this.selection();if(e&&!t.shiftKey)this.insert("`","`","code");else{var n=this.lang||"js";-1===e.indexOf("\n")?this.insert("\n```"+n+"\n","\n```\n","// code"):this.insert("```"+n+"\n","```\n","")}},ol:function(){if(this.hasSelection()){var t=this.selectionInfo(),e=t.sel,n=(t.selPos,t.beforeSel),i=t.afterSel,o=t.prevCRPos,s=t.beforeCR,r=t.afterCR;if(-1===e.indexOf("\n"))this.insert("\n 1. ","\n");else if(!e.startsWith(" 1. ")){var l=1;this.insert("",""," - ",{selectionAtEnd:!0,filterSelection:function(t){return" 1. "+t.replace(/\n$/,"").replace(/\n/g,function(t){return"\n "+ ++l+". "})+"\n"}})}else this.insert("","","",{filterValue:function(t,e){if(o>=0){var l=r.replace(/^ - /,"");n=s+l,e.pos-=r.length-l.length}return n+i},filterSelection:function(t){return t.replace(/^ 1. /g,"").replace(/\n \d+. /g,"\n")}})}else this.insert("\n 1. ","\n","List Item",{offsetStart:-10,offsetEnd:9})},ul:function(){if(this.hasSelection()){var t=this.selectionInfo(),e=t.sel,n=(t.selPos,t.beforeSel),i=t.afterSel,o=t.prevCRPos,s=t.beforeCR,r=t.afterCR;if(-1===e.indexOf("\n"))this.insert("\n - ","\n");else!e.startsWith(" - ")?this.insert("",""," - ",{selectionAtEnd:!0,filterSelection:function(t){return" - "+t.replace(/\n$/,"").replace(/\n/g,"\n - ")+"\n"}}):this.insert("","","",{filterValue:function(t,e){if(o>=0){var l=r.replace(/^ - /,"");n=s+l,e.pos-=r.length-l.length}return n+i},filterSelection:function(t){return t.replace(/^ - /g,"").replace(/\n - /g,"\n")}})}else this.insert("\n - ","\n","List Item",{offsetStart:-10,offsetEnd:9})},heading:function(){var t=this.selection(),e=-1===t.indexOf("\n");t?e?this.insert("\n## ","\n",""):this.insert("## ","",""):this.insert("\n## ","\n","Heading",{offsetStart:-8,offsetEnd:7})},comment:function(){var t=this.selectionInfo(),e=t.sel,n=t.selPos,i=t.beforeSel,o=t.afterSel,s=t.prevCRPos,r=t.beforeCR,l=t.afterCR,a=!e.startsWith("//")&&!l.startsWith("//");a?e?this.insert("","","//",{selectionAtEnd:!0,filterSelection:function(t){return"//"+t.replace(/\n$/,"").replace(/\n/g,"\n//")+"\n"}}):this.replace({value:r+"//"+l+o,selectionStart:n+"//".length}):this.insert("","","",{filterValue:function(t,e){if(s>=0){var n=l.replace(/^\/\//,"");i=r+n,e.pos-=l.length-n.length}return i+o},filterSelection:function(t){return t.replace(/^\/\//g,"").replace(/\n\/\//g,"\n")}})},blockComment:function(){this.insert("/*\n","*/\n","")},undo:function(){if(0===u.length)return!1;var t=this.input(),e=u.pop();return f.push({value:t.value,selectionStart:t.selectionStart,selectionEnd:t.selectionEnd}),this.replace(e),!0},redo:function(){if(0===f.length)return!1;var t=this.input(),e=f.pop();return u.push({value:t.value,selectionStart:t.selectionStart,selectionEnd:t.selectionEnd}),this.replace(e),!0}},v={props:["label","value","counter","rows","rules","errorMessages","lang","autofocus","disabled"],methods:n.n(c)()({save:function(){r.$emit("save")}},d),mounted:function(){var t=this;u=[],f=[],this.$refs.txt.$refs.input.onkeydown=function(e){if("Escape"!==e.key&&27!==e.keyCode){var n=String.fromCharCode(e.keyCode).toLowerCase();if("\t"===n)!e.shiftKey?t.insert("","","    ",{selectionAtEnd:!0,filterSelection:function(t){return"    "+t.replace(/\n$/,"").replace(/\n/g,"\n    ")+"\n"}}):t.insert("","","",{filterValue:function(e,n){var i=t.selectionInfo(),o=(i.selPos,i.beforeSel),s=i.afterSel,r=i.prevCRPos,l=i.beforeCR,a=i.afterCR;if(r>=0){var c=a.replace(/\t/g,"    ").replace(/^ ? ? ? ?/,"");o=l+c,n.pos-=a.length-c.length}return o+s},filterSelection:function(t){return t.replace(/\t/g,"    ").replace(/^ ? ? ? ?/g,"").replace(/\n    /g,"\n")}}),e.preventDefault();else e.ctrlKey?"z"===n?e.shiftKey?t.redo()&&e.preventDefault():t.undo()&&e.preventDefault():"b"!==n||e.shiftKey?"h"!==n||e.shiftKey?"i"!==n||e.shiftKey?"q"!==n||e.shiftKey?"l"===n?e.shiftKey?(t.image(),e.preventDefault()):(t.link(),e.preventDefault()):","===n||"<"===e.key||">"===e.key||188===e.keyCode?(t.code(e),e.preventDefault()):"s"!==n||e.shiftKey?"/"===n||"/"===e.key?(t.comment(),e.preventDefault()):"?"!==n&&"?"!==e.key||!e.shiftKey||(t.blockComment(),e.preventDefault()):(t.save(),e.preventDefault()):(t.quote(),e.preventDefault()):(t.italic(),e.preventDefault()):(t.heading(),e.preventDefault()):(t.bold(),e.preventDefault()):e.altKey&&("1"===e.key||"0"===e.key?(t.ol(),e.preventDefault()):"-"===e.key?(t.ul(),e.preventDefault()):"s"===e.key&&(t.strikethrough(),e.preventDefault()))}else t.$emit("close")}},data:function(){return{}}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor"},[t.disabled?t._e():n("div",{staticClass:"editor-toolbar"},[n("v-btn",{attrs:{small:"",icon:"",title:"H2 Heading (CTRL+H)"},on:{click:t.heading}},[n("v-icon",[t._v("format_size")])],1),t._v(" "),n("v-btn",{attrs:{small:"",icon:"",title:"Bold text (CTRL+B)"},on:{click:t.bold}},[n("v-icon",[t._v("format_bold")])],1),t._v(" "),n("v-btn",{attrs:{small:"",icon:"",title:"Italics (CTRL+I)"},on:{click:t.italic}},[n("v-icon",[t._v("format_italic")])],1),t._v(" "),n("v-btn",{attrs:{small:"",icon:"",title:"Insert Table"},on:{click:t.table}},[n("v-icon",[t._v("table_chart")])],1),t._v(" "),n("v-btn",{attrs:{small:"",icon:"",title:"Insert Code (CTRL+<)"},on:{click:t.code}},[n("v-icon",[t._v("code")])],1),t._v(" "),n("v-btn",{attrs:{small:"",icon:"",title:"Numbered List (ALT+1)"},on:{click:t.ol}},[n("v-icon",[t._v("format_list_numbered")])],1),t._v(" "),n("v-btn",{attrs:{small:"",icon:"",title:"Bulleted List (ALT+-)"},on:{click:t.ul}},[n("v-icon",[t._v("format_list_bulleted")])],1),t._v(" "),n("v-btn",{attrs:{small:"",icon:"",title:"Strike Through (ALT+S)"},on:{click:t.strikethrough}},[n("v-icon",[t._v("format_strikethrough")])],1),t._v(" "),n("v-btn",{attrs:{small:"",icon:"",title:"undo (CTRL+Z)"},on:{click:t.undo}},[n("v-icon",[t._v("undo")])],1),t._v(" "),n("v-btn",{attrs:{small:"",icon:"",title:"redo (CTRL+SHIFT+Z)"},on:{click:t.redo}},[n("v-icon",[t._v("redo")])],1),t._v(" "),n("v-btn",{attrs:{small:"",icon:"",title:"Save (CTRL+S)"},on:{click:t.save}},[n("v-icon",[t._v("save")])],1),t._v(" "),n("a",{staticClass:"btn btn--icon btn--small",staticStyle:{float:"right"},attrs:{title:"formatting help",target:"_blank",href:"https://guides.github.com/features/mastering-markdown"}},[n("v-icon",[t._v("help_outline")])],1)],1),t._v(" "),n("v-textarea",{ref:"txt",attrs:{solo:"",label:t.label,value:t.value,spellcheck:!t.value||-1===t.value.indexOf("```"),counter:t.counter,"auto-grow":"",rows:t.rows||6,disabled:t.disabled,rules:t.rules,"error-messages":t.errorMessages},on:{input:function(e){return t.$emit("input",e)},keydown:function(e){return"button"in e||!t._k(e.keyCode,"tab",9,e.key,"Tab")?t.tab(e):null}}})],1)},staticRenderFns:[]};var p={name:"notes-editor",data:function(){return{edit:!1,dialog:!1,note:this.$root.$data.notes[0],select:[],items:[]}},components:{Editor:n("VU/8")(v,h,!1,function(t){n("awye")},null,null).exports},created:function(){var t=this;r.$on("selected_note",function(e){t.note=e}),r.$on("save",function(e){t.update_note()}),this.getTags()},computed:{textCompiled:function(){return a()(this.note.content)}},methods:{edit_note:function(){this.edit?this.edit=!1:this.edit=!0},update_note:function(){this.$socket.emit("updateNotes",this.note),this.edit=!1,console.log(this.note)},delete_note:function(){this.$socket.emit("delete_note",this.note.id),this.dialog=!1,r.$emit("delete_note",this.note)},getTags:function(){var t={};this.$root.$data.notes.forEach(function(e){if(e.tags)for(var n=0;n<e.tags.length;n++){var i=e.tags[n];t[i]=!0}}),this.items=s()(t)}}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-toolbar",[n("v-btn",{attrs:{flat:"",icon:"",color:"black"},on:{click:t.edit_note}},[n("v-icon",[t._v("code")])],1),t._v(" "),n("v-btn",{attrs:{flat:"",icon:"",color:"green"},on:{click:t.update_note}},[n("v-icon",[t._v("check_circle")])],1),t._v(" "),n("v-btn",{attrs:{flat:"",icon:"",color:"red"},on:{click:function(e){t.dialog=!0}}},[n("v-icon",[t._v("delete")])],1),t._v(" "),t.edit?n("v-text-field",{attrs:{"auto-grow":""},model:{value:t.note.title,callback:function(e){t.$set(t.note,"title",e)},expression:"note.title"}}):t._e()],1),t._v(" "),n("v-divider"),t._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-combobox",{attrs:{items:t.items,label:"Тэги",multiple:"",chips:""},model:{value:t.note.tags,callback:function(e){t.$set(t.note,"tags",e)},expression:"note.tags"}})],1),t._v(" "),n("v-layout",{attrs:{row:""}},[t.edit?n("v-flex",{attrs:{xs12:""}},[n("Editor",{attrs:{label:"Markdown"},model:{value:t.note.content,callback:function(e){t.$set(t.note,"content",e)},expression:"note.content"}})],1):t._e()],1),t._v(" "),n("v-flex",[t.edit?t._e():n("v-card",{attrs:{id:"editor"}},[n("div",{domProps:{innerHTML:t._s(t.textCompiled)}})])],1)],1),t._v(" "),n("v-dialog",{attrs:{"max-width":"290"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[t._v("Удалить заметку?")]),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(e){t.dialog=!1}}},[t._v("Отмена")]),t._v(" "),n("v-btn",{attrs:{color:"red darken-1",flat:"flat"},on:{click:t.delete_note}},[t._v("Удалить")])],1)],1)],1)],1)},staticRenderFns:[]};var _=n("VU/8")(p,g,!1,function(t){n("gdc/")},null,null).exports,b=n("G7bx"),m={name:"notes-picker",data:function(){return{selectedNoteId:this.$root.$data.notes.reduce(function(t,e){return Math.min(t,e.id)},Number.MAX_VALUE),query:"",newNoteInput:"",notes:this.$root.$data.notes}},components:{virtualList:n.n(b).a},created:function(){var t=this;r.$on("delete_note",function(e){var n=t.notes.indexOf(e);t.notes.splice(n,1)})},computed:{filteredNotes:function(){var t=this;return""===this.query?this.notes:this.notes.filter(function(e){var n=new RegExp(t.query,"gi");return n.test(e.content)||n.test(e.title)||n.test(e.tags)})}},methods:{get_one:function(t){var e=this.notes.filter(function(e){return e.id==t});e=e[0],r.$emit("selected_note",e)},addNote:function(){if(this.newNoteInput){var t={id:this.notes.reduce(function(t,e){return Math.max(t,e.id)},0)+1,title:this.newNoteInput,content:"",tags:[]};this.newNoteInput="",r.$emit("selected_note",t),this.$socket.emit("addNote",t),this.notes.push(t)}}}},k={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{row:""}},[n("v-flex",[n("v-card",[n("v-toolbar",{attrs:{color:""}},[n("v-text-field",{attrs:{placeholder:"Поиск"},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}}),t._v(" "),n("v-spacer")],1),t._v(" "),n("v-divider"),t._v(" "),n("v-toolbar",{attrs:{color:""}},[n("v-text-field",{attrs:{placeholder:"Добавить"},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.addNote(e):null}},model:{value:t.newNoteInput,callback:function(e){t.newNoteInput=e},expression:"newNoteInput"}}),t._v(" "),n("v-btn",{attrs:{icon:"",disabled:!t.newNoteInput},on:{click:t.addNote}},[n("v-icon",[t._v("add_circle")])],1)],1),t._v(" "),n("virtual-list",{attrs:{size:100,remain:7}},[n("v-list",t._l(t.filteredNotes,function(e){return n("v-list-tile",{key:e.id,on:{click:function(n){t.get_one(e.id)}}},[n("v-list-tile-content",[n("v-list-tile-title",{domProps:{textContent:t._s(e.title)}})],1)],1)}))],1)],1)],1)],1)},staticRenderFns:[]},x={name:"app",data:function(){return{notes:null}},components:{NotesEditor:_,NotesPicker:n("VU/8")(m,k,!1,null,null,null).exports},created:function(){this.initialize()},methods:{initialize:function(){var t=this;this.$socket.emit("getNotes"),this.$socket.on("getNotes",function(e){t.$root.$data.notes=e,t.notes=t.$root.$data.notes})}}},S={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-app",[e("v-content",[e("v-container",{attrs:{"grid-list-md":"",fluid:""}},[this.notes?e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{xs2:"","text-xs-center":""}},[e("notes-picker")],1),this._v(" "),e("v-flex",{attrs:{xs10:""}},[e("notes-editor"),this._v(" "),e("file")],1)],1):this._e()],1)],1),this._v(" "),e("v-footer",{attrs:{app:""}},[this._v("EvgenJin")])],1)},staticRenderFns:[]};var y=n("VU/8")(x,S,!1,function(t){n("qn0s")},null,null).exports,$=n("hMcO"),C=n.n($),E=n("3EgV"),w=n.n(E);n("7zck"),n("gqsT");i.default.use(C.a,"http://10.26.232.235:8000"),i.default.use(w.a),i.default.config.productionTip=!1,new i.default({el:"#app",template:"<App/>",components:{App:y},data:{notes:[],note:{}},sockets:{disconnect:function(){console.log("socket to notification channel disconnected")},connect:function(){console.log("socket to notification channel connected!!!!")}}})},awye:function(t,e){},"gdc/":function(t,e){},gqsT:function(t,e){},qn0s:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.7045d684ee8030b1f23d.js.map